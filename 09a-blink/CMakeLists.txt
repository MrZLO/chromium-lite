PROJECT(chromium-blink C CXX)

CMAKE_MINIMUM_REQUIRED(VERSION 2.8.8)
SET(CMAKE_BUILD_TYPE Debug)
SET(CMAKE_POSITION_INDEPENDENT_CODE ON)

SET(PROJECT_NAME "Chromium - Blink")

# Verify the Toolchain file has been passed
IF(NOT CMAKE_TOOLCHAIN_FILE)
  MESSAGE(FATAL_ERROR "Please pass \"-DCMAKE_TOOLCHAIN_FILE=../Toolchain-<arch>.cmake\" when running cmake !")
ENDIF(NOT CMAKE_TOOLCHAIN_FILE)
MESSAGE(STATUS "Chosen Toolchain: ${CMAKE_TOOLCHAIN_FILE}")

# Location of Base source folder
SET(BASE_DIR "${CMAKE_SOURCE_DIR}/../../../base")

# Location of Skia source folders
SET(SKIA_SOURCE_DIR "${CMAKE_SOURCE_DIR}/../../third_party/skia")
SET(SKIA_EXT_DIR "${CMAKE_SOURCE_DIR}/../../skia")

# Verify a backend (X11/OZONE) has been chosen ; default to OZONE
IF(NOT BACKEND)
  MESSAGE(STATUS "Option \"-DBACKEND=<X11/OZONE>\" not passed; defaulting to OZONE...")
  SET(BACKEND "OZONE")
ENDIF(NOT BACKEND)
MESSAGE(STATUS "Chosen Backend: ${BACKEND}")

# CMake modules
INCLUDE(FindThreads)
INCLUDE(FindPkgConfig)
INCLUDE(GNUInstallDirs)

# Mandatory dependencies
FIND_PACKAGE(Threads)
PKG_CHECK_MODULES(icu REQUIRED icu-i18n icu-uc)

# Optional definitions
IF(BACKEND STREQUAL "OZONE")
  SET(BACKEND_SOURCE_FILES platform/exported/WebScrollbarImpl.h)
  ADD_DEFINITIONS(-DUSE_OZONE)
ENDIF(BACKEND STREQUAL "OZONE")

IF(BACKEND STREQUAL "X11")
  #PKG_CHECK_MODULES(backend REQUIRED x11)
  SET(BACKEND_SOURCE_FILES platform/exported/WebScrollbarImpl.h)
  ADD_DEFINITIONS(-DUSE_X11)
ENDIF(BACKEND STREQUAL "X11")

# Common definitions
ADD_DEFINITIONS(-DBLINK_COMMON_IMPLEMENTATION=1 -DBLINK_PLATFORM_IMPLEMENTATION=1 -DINSIDE_BLINK -DUSE_AURA -DUSING_SYSTEM_ICU)
ADD_DEFINITIONS(-DWTF_IMPLEMENTATION=1)

IF(CMAKE_COMPILER_IS_GNUCXX)
    ADD_DEFINITIONS(-std=c++11 -Wno-c++0x-compat)
ENDIF()


# SOURCES FILE LIST

# wtf
ADD_LIBRARY(wtf OBJECT wtf/ASCIICType.cpp wtf/AddressSpaceRandomization.cpp wtf/ArrayBuffer.cpp wtf/ArrayBufferBuilder.cpp wtf/ArrayBufferContents.cpp wtf/ArrayBufferView.cpp wtf/ArrayPiece.cpp wtf/Assertions.cpp wtf/BitVector.cpp wtf/CryptographicallyRandomNumber.cpp wtf/CurrentTime.cpp wtf/DataLog.cpp wtf/DateMath.cpp wtf/DynamicAnnotations.cpp wtf/FilePrintStream.cpp wtf/HashTable.cpp wtf/InstanceCounter.cpp wtf/MainThread.cpp wtf/PageAllocator.cpp wtf/PartitionAlloc.cpp wtf/PartitionAllocator.cpp wtf/Partitions.cpp wtf/PrintStream.cpp wtf/RefCountedLeakCounter.cpp wtf/SpinLock wtf/ThreadingPthreads.cpp wtf/TypeTraits.cpp wtf/WTF.cpp wtf/WTFThreadData.cpp wtf/dtoa.cpp wtf/dtoa/bignum-dtoa.cc wtf/dtoa/bignum.cc wtf/dtoa/cached-powers.cc wtf/dtoa/diy-fp.cc wtf/dtoa/double-conversion.cc wtf/dtoa/fast-dtoa.cc wtf/dtoa/fixed-dtoa.cc wtf/dtoa/strtod.cc wtf/text/AtomicString.cpp wtf/text/AtomicStringCF.cpp wtf/text/Base64.cpp wtf/text/CString.cpp wtf/text/StringBuilder.cpp wtf/text/StringConcatenate.cpp wtf/text/StringImpl.cpp wtf/text/StringImplCF.cpp wtf/text/StringStatics.cpp wtf/text/TextCodecICU.cpp wtf/text/TextCodecLatin1.cpp wtf/text/TextCodecReplacement.cpp wtf/text/TextCodecUTF16.cpp wtf/text/TextCodecUTF8.cpp wtf/text/TextCodecUserDefined.cpp wtf/text/TextEncodingRegistry.cpp wtf/text/TextPosition.cpp wtf/text/UTF8.cpp wtf/text/WTFString.cpp wtf/text/icu/CollatorICU.cpp)

# platform_common
ADD_LIBRARY(platform_common OBJECT platform/exported/WebCString.cpp platform/exported/WebString.cpp platform/exported/WebCommon.cpp)

# platform
ADD_LIBRARY(platform OBJECT platform/Clock.cpp platform/ContentSettingCallbacks.cpp platform/ContentType.cpp platform/ContextMenu.cpp platform/ContextMenuItem.cpp platform/CrossThreadCopier.cpp platform/Crypto.cpp platform/Cursor.cpp platform/DateComponents.cpp platform/Decimal.cpp platform/DragImage.cpp platform/EventDispatchForbiddenScope.cpp platform/EventTracer.cpp platform/FileChooser.cpp platform/FileMetadata.cpp platform/JSONValues.cpp platform/KillRingNone.cpp platform/Language.cpp platform/LayoutTestSupport.cpp platform/Length.cpp platform/LengthBox.cpp platform/LengthFunctions.cpp platform/LinkHash.cpp platform/Logging.cpp platform/MIMETypeFromURL.cpp platform/MIMETypeRegistry.cpp platform/MemoryPurgeController.cpp platform/NotImplemented.cpp platform/PartitionAllocMemoryDumpProvider.cpp platform/PlatformInstrumentation.cpp platform/PlatformKeyboardEvent.cpp platform/PlatformResourceLoader.cpp platform/PluginScriptForbiddenScope.cpp platform/Prerender.cpp platform/PurgeableVector.cpp platform/ScriptForbiddenScope.cpp platform/SecureTextInput.cpp platform/SharedBuffer.cpp platform/SharedBufferChunkReader.cpp platform/Supplementable.cpp platform/TaskSynchronizer.cpp platform/Theme.cpp platform/Timer.cpp platform/TracedValue.cpp platform/UUID.cpp platform/UserGestureIndicator.cpp platform/WebScheduler.cpp platform/WebTaskRunner.cpp platform/WebThreadSupportingGC.cpp platform/WebThread.cpp platform/Widget.cpp animation/CubicBezierControlPoints.cpp animation/TimingFunction.cpp audio/AudioBus.cpp audio/AudioChannel.cpp audio/AudioDSPKernel.cpp audio/AudioDSPKernelProcessor.cpp audio/AudioDelayDSPKernel.cpp audio/AudioDestination.cpp audio/AudioFIFO.cpp audio/AudioProcessor.cpp audio/AudioPullFIFO.cpp audio/AudioResampler.cpp audio/AudioResamplerKernel.cpp audio/AudioUtilities.cpp audio/Biquad.cpp audio/Cone.cpp audio/DirectConvolver.cpp audio/Distance.cpp audio/DownSampler.cpp audio/DynamicsCompressor.cpp audio/EqualPowerPanner.cpp audio/FFTConvolver.cpp audio/FFTFrame.cpp audio/FFTFrameStub.cpp audio/HRTFDatabase.cpp audio/HRTFPanner.cpp audio/MultiChannelResampler.cpp audio/Panner.cpp audio/Reverb.cpp audio/ReverbAccumulationBuffer.cpp audio/ReverbConvolver.cpp audio/ReverbConvolverStage.cpp audio/ReverbInputBuffer.cpp audio/SincResampler.cpp audio/Spatializer.cpp audio/StreoPanner.cpp audio/UpSampler.cpp audio/VectorMath.cpp audio/ZeroPole.cpp blob/BlobData.cpp blob/BlobRegistry.cpp blob/BlobURL.cpp clibpoard/ClipboardMimeMtypes.cpp clipboard/ClipboardUtilities.cpp clipboard/ClipboardUtilitiesPosix.cpp credentialmanager/PlatformCredential.cpp credentialmanager/PlatformFederatedCredential.cpp credential/PlatformPasswordCredential.cpp exported/Platform.cpp exported/WebActiveGestureAnimation.cpp exported/WebAudioBus.cpp exported/WebAudioBus.cpp exported/WebAudioDevice.cpp exported/WebBlobData.cpp exported/WebCanvasCaptureHandler.cpp exported/WebCompositorAnimationPlayerClient.cpp exported/WebContentDecryptionModule.cpp exported/WebContentDecryptionModule.cpp exported/WebContentSettingCallbacks.cpp exported/WebConvertableToTraceFormat.cpp exported/WebCredential.cpp exported/WebCryptoAlgorithm.cpp exported/WebCryptoKey.cpp exported/WebCryptoKeyAlgorithm.cpp exported/WebCryptoResult.cpp exported/WebCryptoUtil.cpp exported/WebData.cpp exported/WebDataConsumerHandle.cpp exported/WebDeviceMotionData.cpp exported/WebDeviceOrientationData.cpp exported/WebDragData.cpp exported/WebEncryptedMediaClient.cpp exported/WebFederatedCredential.cpp exported/WebFileSystemCallbacks.cpp exported/WebFilterKeyframe.cpp exported/WebHTTPBody.cpp exported/WebHTTPLoadInfo.cpp exported/WebImageGenerator.cpp exported/WebImage.cpp exported/WebMediaConstraints.cpp exported/WebMediaDeviceInfo.cpp exported/WebMediaPlayerClient.cpp exported/WebMediaPlayerClient.cpp exported/WebMediaPlayerEncryptedMediaClient.cpp exported/WebMediaRecorderHandler.cpp exported/WebMediaStream.cpp exported/WebMediaStreamSource.cpp exported/WebMediaStreamTrack.cpp exported/WebMemoryAllocatorDump.cpp exported/WebMemoryDumpProvider.cpp exported/WebMessagePortChannelClient.cpp exported/WebPasswordCredential.cpp exported/WebPrerender.cpp exported/WebPrerenderingSupport.cpp exported/WebPresentationAvailabityObserver.cpp exported/WebPresentationController.cpp exported/WebProcessMemoryDump.cpp exported/WebRTCConfiguration.cpp exported/WebRTCICECandidate.cpp exported/WebRTCOfferOptions.cpp exported/WebRTCSessionDescription.cpp exported/WebRTCStatsRequest.cpp exported/WebRTCStatsResponse.cpp exported/WebRTCVoidRequest.cpp exported/WebScrollbarImpl.cpp exported/WebScrollbarThemeClientImpl.cpp exported/WebScrollbarThemeGeometryNative.cpp exported/WebScrollbarThemePainter.cpp exported/WebSecurityOrigin.cpp exported/WebServicePortProviderClient.cpp exported/WebServiceWorkerProviderClient.cpp exported/WebServiceWorkerProxy.cpp exported/WebServiceWorkerRequest.cpp exported/WebServiceWorkerResponse.cpp exported/WebSocketHandshakeRequestInfo.cpp exported/WebSocketHandshakeRequestInfo.cpp exported/WebSourceInfo.cpp exported/WebSkImage.cpp exported/WebSpeechSynthesisUterrance.cpp exported/WebSpeechSynthesisVoice.cpp exported/WebSpeechSynthesizerClientImpl.cpp exported/WebStorageQuotaCallbacks.cpp exported/WebThreadSafeData.cpp exported/WebThreadedDataReceiver.cpp exported/WebTraceLocation.cpp exported/WebTransformKeyframe.cpp exported/WebURL.cpp exported/WebURLError.cpp exported/WebURLLoaderClient.cpp exported/WebURLLoaderClient.cpp exported/WebURLLoaderTestDelegate.cpp exported/WebURLLoadTiming.cpp exported/WebURLRequest.cpp exported/WebURLResponse.cpp exported/linux/WebFontInfo.cpp exported/linux/WebFontRenderStyle.cpp fonts/Character.cpp fonts/Font.cpp fonts/FontCache.cpp fonts/FontCacheMemoryDumpProvider.cpp fonts/FontCustomPlatformData.cpp fonts/FontData.cpp fonts/FontDataCache.cpp fonts/FontDescription.cpp fonts/FontFallbackIterator.cpp fonts/FontFallbackList.cpp fonts/FontFamily.cpp fonts/FontFeatureSettings.cpp fonts/FontPlatformData.cpp fonts/GenericFontFamilySettings.cpp fonts/GlyphPageTreeNode.cpp fonts/OrientationIterator.cpp fonts/ScriptRunIterator.cpp fonts/SegmentedFontData.cpp fonts/SimpleFontData.cpp fonts/SmallCapsIterator.cpp fonts/UTF16TextIterator.cpp fonts/VDMXParser.cpp fonts/linux/FontCacheLinux.cpp fonts/linux/FontPlatformDataLinux.cpp fonts/opentype/OpenTypeSanitizer.cpp fonts/opentype/OpenTypeVerticalData.cpp fonts/shaping/CachingWordShaper.cpp fonts/shaping/HarfBuzzFace.cpp fonts/shaping/HarfBuzzShaper.cpp fonts/shaping/RunSegmenter.cpp fonts/shaping/ShapeResult.cpp fonts/shaping/ShapeResultTestInfo.cpp fonts/shaping/Shader.cpp fonts/shaping/SimpleShaper.cpp fonts/skia/FontCacheSkia.cpp geometry/DoublePoint.cpp geometry/DoubleRect.cpp geometry/DoubleSize.cpp geometry/FloatPoint.cpp geometry/FloatPoint3D.cpp geometry/FloatPolygon.cpp geometry/FloatQuad.cpp geometry/FloatRect.cpp geometry/FloatRoundedRect.cpp geometry/FloatSize.cpp geometry/IntRect.cpp geometry/LayoutRectOutsets.cpp geometry/LayoutRect.cpp geometry/Region.cpp geometry/TransformState.cpp geometry/cg/FloatPointCG.cpp geometry/cg/FloatRectCG.cpp geometry/cg/FloatSizeCG.cpp geometry/cg/IntPointCG.cpp geometry/cg/IntRectCG.cpp geometry/cg/IntSizeCG.cpp graphics/BitmapImage.cpp graphics/CanvasMetrics.cpp graphics/Color.cpp graphics/ColorSpace.cpp graphics/CompositingReasons.cpp graphics/ContentLayerDelegate.cpp graphics/ContiguousContainer.cpp graphics/CrossfadeGeneratedImage.cpp graphics/DecodingImageGenerator.cpp graphics/DeferredImageDecoder.cpp graphics/PicturePattern.cpp graphics/PictureSnapshot.cpp graphics/DrawLooperBuilder.cpp graphics/FirstPaintInvalidationTracking.cpp graphics/FrameData.cpp graphics/GeneratedImage.cpp graphics/Gradient.cpp graphics/GradientGeneratedImage.cpp graphics/GraphicsContext.cpp graphics/GraphicsContextState.cpp graphics/GraphicsLayer.cpp graphics/GraphicsLayerDebugInfo.cpp graphics/GraphicsTypes.cpp graphics/ImageBuffer.cpp graphics/Image.cpp graphics/ImageBuffer.cpp graphics/ImageBufferSurface.cpp graphics/ImageDecodingStore.cpp graphics/ImageFrameGenerator.cpp graphics/ImageObserver.cpp graphics/ImageOrientation.cpp graphics/ImagePattern.cpp graphics/ImageSource.cpp graphics/InterceptingCanvas.cpp graphics/LoggingCanvas.cpp graphics/PaintInvalidationReason.cpp graphics/Path.cpp graphics/PathTraversalState.cpp graphics/Pattern.cpp graphics/ProfilingCanvas.cpp graphics/RecordingImageBufferSurface.cpp graphics/ReplayingCanvas.cpp graphics/StaticBitmapImage.cpp graphics/StrokeData.cpp graphics/ThreadSafeDataTransport.cpp graphics/UnacceleratedImageBufferSurface.cpp graphics/compositing/PaintArtifactCompositor.cpp graphics/filters/DistantLightSource.cpp graphics/filters/FEBlend.cpp graphics/filters/FEColorMatrix.cpp graphics/filters/FEComponentTransfer.cpp graphics/filters/FEComposite.cpp graphics/filters/FEConvolveMatrix.cpp graphics/filters/FEDiffuseLighting.cpp graphics/filters/FEDisplacementMap.cpp graphics/filters/FEDropShadow.cpp graphics/filters/FEFlood.cpp graphics/filters/FEGaussianBlur.cpp graphics/filters/FEMerge.cpp graphics/filters/FEMorphology.cpp graphics/filters/FEOffset.cpp graphics/filters/FESpecularLighting.cpp graphics/filters/FETile.cpp graphics/filters/FETurbulence.cpp graphics/filters/Filter.cpp graphics/filters/FilterEffect.cpp graphics/filters/FilterOperation.cpp graphics/filters/FilterOperations.cpp graphics/filters/LightSource.cpp graphics/filters/PointLightSource.cpp graphics/filters/SkiaImageFilterBuilder.cpp graphics/filters/SourceAlpha.cpp graphics/filters/SourceGraphic.cpp graphics/filters/SpotLightSource.cpp graphics/gpu/AcceleratedImageBufferSurface.cpp graphics/gpu/SharedContextRateLimiter.cpp graphics/gpu/DrawingBuffer.cpp graphics/gpu/Extensions3DUtil.cpp graphics/gpu/WebGLImageConversion.cpp graphics/paint/ClipDisplayItem.cpp graphics/paint/ClipPathDisplayItem.cpp graphics/paint/ClipPathRecorder.cpp graphics/paint/ClipRecorder.cpp graphics/paint/CullRect.cpp graphics/paint/DisplayItem.cpp graphics/paint/DrawingDisplayItem.cpp graphics/paint/DrawingRecorder.cpp graphics/paint/FilterDisplayItem.cpp graphics/paint/FixedPositionContainerDisplayItem.cpp graphics/paint/FixedPositionDisplayItem.cpp graphics/paint/FloatClipDisplayItem.cpp graphics/paint/PaintArtifact.cpp graphics/paint/PaintArtifactToSkCanvas.cpp graphics/paint/PaintChunker.cpp graphics/paint/PaintController.cpp graphics/paint/ScrollDisplayItem.cpp graphics/paint/SubsequenceRecorder.cpp graphics/paint/Transform3DDisplayItem.cpp graphics/paint/CompositingDisplayItem.cpp graphics/skia/ImagePixelLocker.cpp graphics/skia/SkiaUtils.cpp image-decoders/FastShaderBufferReader.cpp image-decoders/ImageDecoder.cpp image-decoders/ImageFrame.cpp image-decoders/bmp/BMPImageDecoder.cpp image-decoders/bmp/BMPImageReader.cpp image-decoders/gif/GIFImageDecoder.cpp image-decoders/gif/GIFImageReader.cpp image-decoders/ico/JPEGImageDecoder.cpp image-decoders/jpeg/JPEGImageDecoder.cpp image-decoders/png/PNGImageDecoder.cpp image-decoders/webp/WEBPImageDecoder.cpp image-encoders/skia/JPEGImageEncoder.cpp image-encoders/skia/PNGImageEncoder.cpp image-encoders/skia/WEBPImageEncoder.cpp mediastream/MediaStreamCenter.cpp mediastream/MediaStreamComponent.cpp mediastream/MediaStreamDescriptor.cpp mediastream/MediaStreamSource.cpp mediastream/MediaStreamWebAudioSource.cpp mhtml/ArchiveResource.cpp mhtml/ArchiveResourceCollection.cpp mhtml/MHTMLArchive.cpp mhtml/MHTMLParser.cpp network/ContentSecurityPolicyParsers.cpp network/ContentSecurityPolicyResponseHeaders.cpp network/EncodedFormData.cpp network/FormDataEncoder.cpp network/HTTPHeaderMap.cpp network/HTTPParsers.cpp network/NetworkHints.cpp network/ParsedContentType.cpp network/ResourceError.cpp network/ResourceLoadTiming.cpp network/ResourceRequest.cpp network/ResourceResponse.cpp network/ResourceTimingInfo.cpp network/WebSocketHandshakeRequest.cpp network/WebSocketHandshakeResponse.cpp plugins/PluginData.cpp plugins/PluginListBuilder.cpp scheduler/CancellableTaskFactory.cpp scroll/ProgrammaticScrollAnimator.cpp scroll/ScrollAnimatorBase.cpp scroll/ScrollAnimator.cpp scroll/ScrollableArea.cpp scroll/Scrollbar.cpp scrollbar/ScrollbarTheme.cpp scrollbar/ScrollbarThemeAura.cpp scrollbar/ScrollbarThemeOverlay.cpp speech/PlatformSpeechSynthesisUtterrance.cpp speech/PlatformSpeechSynthesisVoice.cpp speech/PlatformSpeechSynthesizer.cpp text/BidiCharacterRun.cpp text/BidiContext.cpp text/BidiTextRun.cpp text/DateTimeFormat.cpp text/LineEnding.cpp text/LocaleICU.cpp text/LocaleToScriptMapping.cpp text/PlatformLocale.cpp text/QuotedPrintable.cpp text/SegmentedString.cpp text/StringTruncator.cpp text/TextBoundaries.cpp text/TextBreakIterator.cpp text/TextBreakIteratorICU.cpp text/TextBreakIteratorInternalICU.cpp text/TextCheckerClient.cpp text/TextEncodingDetector.cpp text/TextRun.cpp text/TextStream.cpp text/UnicodeRange.cpp text/UnicodeRange.cpp text/UnicodeUtilites.cpp transforms/AffineTransform.cpp transforms/InterpolatedTransformOperation.cpp transforms/Matrix3DTransformOperation.cpp transforms/MatrixTransformOperation.cpp transforms/PerspectiveTransformOperation.cpp transforms/RotateTransformOperation.cpp transforms/ScaleTransformOperation.cpp transforms/SkewTransformOperation.cpp transforms/TransformOperations.cpp transforms/TransformationMatrix.cpp transforms/TranslateTransformOperation.cp weborigin/DatabaseIdentifier.cpp weborigin/KURL.cpp weborigin/KnownPorts.cpp weborigin/OriginAccessEntry.cpp weborigin/SchemeRegistry.cpp weborigin/SecurityOrigin.cpp weborigin/SecurityPolicy.cpp)

# platform_heap
ADD_LIBRARY(platform_heap OBJECT platform/heap/BlinkGCInterruptor.cpp platform/heap/BlinkGCMemoryDumpProvider.cpp platform/heap/CallbackStack.cpp platform/heap/GCInfo.cpp platform/heap/HeapAllocator.cpp platform/heap/HeapPage.cpp platform/heap/PagePool.cpp platform/heap/PersistentNode.cpp platform/heap/StackFrameDepth.cpp platform/heap/ThreadState.cpp)

# web
ADD_LIBRARY(web OBJECT web/AssertMatchingEnums.cpp web/AssociateURLLoader.cpp web/AudioOutputDeviceClientImpl.cpp web/ChromeClientImpl.cpp web/ColorChooserPopupUIController.cpp web/ColorChooserUIController.cc web/CompositionUnderlineVectorBuilder.cpp web/ContextFeaturesClientImpl.cpp web/ContextMenuAllowedScope.cpp web/ContextMenuClientImpl.cpp web/DatabaseClientImpl.cpp web/DateTimeChooserImpl.cpp web/DevToolsEmulator.cpp web/DragClientImpl.cpp web/EditorClientImpl.cpp web/ExternalDateTimeChooser.cpp web/ExternalPopupMenu.cpp web/FindInPageCoordinates.cpp web/FrameLoaderClientImpl.cpp web/FullscreenController.cpp web/GeolocationClientProxy.cpp web/GraphicsFactoryChromium.cpp web/IndexedDBClientImpl.cpp web/InspectorEmulationAgent.cpp web/InspectorOverlay.cpp web/InspectorRenderingAgent.cpp web/LinkHighlightImpl.cpp web/LocalFileSystemClient.cpp web/MIDIClientProxy.cpp web/MediaKeysClientImpl.cpp web/NavigatorContentUtilsClientImpl.cpp web/NotificationPermissionClientImpl.cpp web/OpenedFrameTracker.cpp web/PageOverlay.cpp web/PageWidgetDelegate.cpp web/PopupMenuImpl.cpp web/PrerendererClientImpl.cpp web/RemoteBridgeFrameOwner.cpp web/RemoteFrameClientImpl.cpp web/ResizeViewportAnchor.cpp web/ServiceWorkerGlobalScopeClientImpl.cpp web/ServiceWorkerGlobalScopeProxy.cpp web/SharedWorkerRepositoryClientImpl.cpp web/SpeechRecognitionClientProxy.cpp web/SpellCheckerClientImpl.cpp web/StorageQuotaClientImpl.cpp web/SuspendableScriptExecutor.cpp web/TextFinder.cpp web/UserMediaClientImpl.cpp web/ValidationMessageClientImpl.cpp web/WebAXObject.cpp web/WebArrayBuffer.cpp web/WebArrayBufferConverter.cpp web/WebArrayBufferView.cpp web/WebBindings.cpp web/WebBlob.cpp web/WebCache.cpp web/WebColorSuggestion.cpp web/WebCryptoNormalize.cpp web/WebCustomElement.cpp web/WebCSSParser.cpp web/WebDOMActivityLogger.cpp web/WebDOMEvent.cpp web/WebDOMFileSystem.cpp web/WebDOMMediaStreamTrack.cpp web/WebDOMMessageEvent.cpp web/WebDataSourceImpl.cpp web/WebDatabase.cpp web/WebDateTimeSuggestion.cpp web/WebDevToolsAgentImpl.cpp web/WebDevToolsFrontendImpl.cpp web/WebDocument.cpp web/WebElement.cpp web/WebElementCollection.cpp web/WebEmbeddedWorkerImpl.cpp web/WebEntities.cpp web/WebFileChooserCompletionImpl.cpp web/WebFontDescription.cpp web/WebFontImpl.cpp web/WebFormControlElement.cpp web/WebFormElement.cpp web/WebFrameImplBase.cpp web/WebFrame.cpp web/WebFrameWidgetImpl.cpp web/WebGeolocationController.cpp web/WebGeolocationError.cpp web/WebGeolocationPermissionRequest.cpp web/WebGeolocationPermissionRequestManager.cpp web/WebGeolocationPosition.cpp web/WebHeap.cpp web/WebHelperPluginImpl.cpp web/WebHistoryItem.cpp web/WebHitTestResult.cpp web/WebIDBKey.cpp web/WebIDBKeyRange.cpp web/WebImageCache.cpp web/WebImageDecoder.cpp web/WebInputEventConversion.cpp web/WebLabelElement.cpp web/WebLeakDetector.cpp web/WebLocalFrameImpl.cpp web/WebMIDIPermisionRequest.cpp web/WebMediaDevicesRequest.cpp web/WebMediaStreamRegistry.cpp web/WebMetaElement.cpp web/WebMemoryPressureListener.cpp web/WebNetworkStateNotifier.cpp web/WebNode.cpp web/WebOptionElement.cpp web/WebPageImportanceSignals.cpp web/WebPagePopupImpl.cpp web/WebPageSerializer.cpp web/WebPageSerializerImpl.cpp web/WebPerformance.cpp web/WebPluginContainerImpl.cpp web/WebPluginDocument.cpp web/WebPluginScriptForbiddenScope.cpp web/WebRange.cpp web/WeRemoteFrameImpl.cpp web/WebRuntimeFeatures.cpp web/WebScopedMicrotaskSuppression.cpp web/WebScopedUserGesture.cpp web/WebScopedWindowFocusAllowedIndicator.cpp web/WebScriptBindings.cpp web/WebScriptController.cpp web/WebScriptSource.cpp web/WebSearchableFormData.cpp web/WebSecurityPolicy.cpp web/WebSelectElement.cpp web/WebSelection.cpp web/WebSelector.cpp web/WebSerializedScriptValue.cpp web/WebSettingsImpl.cc web/WebSharedWorkerImpl.cpp web/WebSocket.cpp web/WebSocketImpl.cpp web/WebSpeechGrammar.cpp web/WebSpeechRecognitionHandle.cpp web/WebStorageEventDispatcherImpl.cpp web/WebSurroundingText.cpp web/WebTextCheckingCompletionImpl.cpp web/WebTextCheckingResult.cpp web/WebTextInfoInfo.cpp web/WebTextRun.cpp web/WebUserGestureIndicator.cpp web/WebUserGestureToken.cpp web/WebUserMediaRequest.cpp web/WebViewFrameWidget.cpp web/WebViewImpl.cpp web/WorkerContentSettingsClient.cpp web/WorkerGlobalScopeProxyProviderImpl.cpp default/WebRenderTheme.cpp linux/WebFontRendering.cpp web/WebKit.cpp)

# generated (these are generated !)
ADD_LIBRARY(generated OBJECT ${CMAKE_BINARY_DIR}/FontFamilyNames.cpp ${CMAKE_BINARY_DIR}/RuntimeEnabledFeatures.cpp ${CMAKE_BINARY_DIR}/ColorData.cpp)

# backend
ADD_LIBRARY(backend OBJECT ${BACKEND_SOURCE_FILES})


# all files refer to "ui/...", so we include "../.." here
SET(include_dirs ${INCLUDE_DIRS} ${icu_INCLUDE_DIRS} ${backend_INCLUDE_DIRS} ${BASE_DIR}/.. ${SKIA_EXT_DIR}/config ${SKIA_SOURCE_DIR}/include/core ${CMAKE_SOURCE_DIR}/wtf ${CMAKE_SOURCE_DIR} ${CMAKE_SOURCE_DIR}/..)
SET(link_libraries ${icu_LIBRARIES} ${backend_LIBRARIES} ${CMAKE_THREAD_LIBS_INIT} -ldl)

ADD_LIBRARY(blink SHARED $<TARGET_OBJECTS:wtf> $<TARGET_OBJECTS:platform_common> $<TARGET_OBJECTS:platform> $<TARGET_OBJECTS:platform_heap> $<TARGET_OBJECTS:web> $<TARGET_OBJECTS:generated> $<TARGET_OBJECTS:backend> ${TOOLCHAIN_OPTS_SOURCE_FILES})
INCLUDE_DIRECTORIES(${include_dirs})
TARGET_LINK_LIBRARIES(blink ${link_libraries})

INSTALL(TARGETS blink
        LIBRARY DESTINATION ${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_LIBDIR}/chromium)
